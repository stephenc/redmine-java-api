<?xml version="1.0"?>
<!DOCTYPE mapping PUBLIC "-//EXOLAB/Castor Mapping DTD Version 1.0//EN"
                         "http://castor.org/mapping.dtd">
<mapping>
	<description>Redmine XML -> Java API binding. see http://taskadapter.com</description>

	<class name="org.alskor.redmine.beans.Project">
		<map-to xml="project"/>
	
		<field name="id" type="integer">
			<bind-xml name="id" node="element" />
		</field>
		<field name="name" type="string">
			<bind-xml name="name" node="element" />
		</field>
		<field name="identifier" type="string">
			<bind-xml name="identifier" node="element" />
		</field>
		<field name="description" type="string">
			<bind-xml name="description" node="element" />
		</field>
		<field name="createdOn" type="string" handler="org.alskor.redmine.internal.RedmineLongDateHandler">
			<bind-xml name="created_on" node="element" />
		</field>
		<field name="updatedOn" type="string" handler="org.alskor.redmine.internal.RedmineLongDateHandler">
			<bind-xml name="updated_on" node="element" />
		</field>
		
		<!--
		    NOTE: transient="true" means that this field will be IGNORED during Marshalling operation.
			This is required to avoid bug http://www.redmine.org/issues/7085 :
			"create project" with empty trackers list gives "NoMethodError (undefined method `each' for nil:NilClass)"
		 -->
 		<field name="trackers" type="org.alskor.redmine.beans.Tracker" container="false" collection="arraylist"
 		       >
			<bind-xml name="trackers" transient="true"/>
		</field>
	</class>
	
	<class name="org.alskor.redmine.beans.Tracker">
        <map-to xml="tracker"/>
        <field name="id" type="integer" >
            <bind-xml name="id" node="attribute"/>
        </field>
        <field name="name" type="string" >
            <bind-xml name="name" node="attribute"/>
        </field>
    </class>

</mapping>